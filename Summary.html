<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>TECHVERSE LFA Summary</title>
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
    rel="stylesheet" />

  <script src="../js/toggletheme.js"></script>

  <script id="tailwind-config">
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            navy: {
              DEFAULT: "#0f172a",
              light: "#1e293b",
              hover: "#334155",
            },
            primary: "#0f172a",
            secondary: "#3b82f6",
            surface: "#ffffff",
            "background-light": "#f8fafc",
          },
          fontFamily: {
            sans: ["Inter", "sans-serif"],
          },
          backgroundImage: {
            'dot-pattern': 'radial-gradient(#cbd5e1 1px, transparent 1px)',
            'dot-pattern-dark': 'radial-gradient(#334155 1px, transparent 1px)',
          }
        },
      },
    }
  </script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }

    .bg-dots {
      background-size: 24px 24px;
    }

    .material-symbols-outlined {
      font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
    }

    @media print {
      @page {
        size: A4 landscape;
        margin: 12mm;
      }

      .no-print {
        display: none;
      }

      .page-sheet {
        box-shadow: none;
        margin: 0;
        max-width: 100%;
        width: 100%;
        border: none;
      }
    }
  </style>
</head>

<body
  class="bg-background-light dark:bg-slate-950 text-slate-800 dark:text-slate-100 min-h-screen flex flex-col items-center py-8 px-4 relative transition-colors duration-300 bg-dots bg-dot-pattern dark:bg-dot-pattern-dark">

  <button aria-label="Toggle Dark Mode" onclick="toggleTheme()"
    class="fixed top-6 right-6 z-50 w-12 h-12 rounded-full bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-400 shadow-lg hover:shadow-xl hover:text-navy dark:hover:text-white transition-all no-print border border-slate-200 dark:border-slate-700 flex items-center justify-center hover:scale-110 active:scale-95">
    <span class="material-symbols-outlined text-[20px] block dark:hidden">dark_mode</span>
    <span class="material-symbols-outlined text-[20px] hidden dark:block">light_mode</span>
  </button>

  <main
    class="page-sheet bg-white dark:bg-slate-900 w-full max-w-5xl shadow-2xl dark:shadow-slate-900/50 rounded-3xl border-2 border-slate-200 dark:border-slate-800 p-10 md:p-14 relative overflow-hidden transition-all duration-300">

    <div
      class="absolute top-0 right-0 w-40 h-40 bg-gradient-to-br from-blue-500/10 to-purple-500/10 dark:from-blue-500/5 dark:to-purple-500/5 rounded-bl-full pointer-events-none">
    </div>

    <header
      class="flex justify-between items-start border-b-2 border-slate-200 dark:border-slate-800 pb-8 mb-10 transition-colors duration-300 relative z-10">
      <div class="flex items-start gap-5">
        <div
          class="w-12 h-12 bg-navy dark:bg-blue-600 rounded-xl flex items-center justify-center shadow-lg transition-colors duration-300">
          <span class="material-symbols-outlined text-white text-2xl">account_tree</span>
        </div>
        <div>
          <h1 class="text-2xl font-black text-navy dark:text-white leading-tight transition-colors duration-300">LFA
            Blueprint Builder</h1>
          <p
            class="text-sm text-slate-500 dark:text-slate-400 font-semibold tracking-wide uppercase mt-1 transition-colors duration-300">
            Professional Summary Review</p>
        </div>
      </div>
      <div class="text-right">
        <div
          class="inline-flex items-center gap-2 bg-green-50 dark:bg-green-900/30 border-2 border-green-200 dark:border-green-800 text-green-700 dark:text-green-300 px-4 py-2 rounded-full shadow-sm transition-colors duration-300">
          <span class="material-symbols-outlined text-[20px]"
            style="font-variation-settings: 'FILL' 1">check_circle</span>
          <span class="text-xs font-black uppercase tracking-wide">Completed</span>
        </div>
      </div>
    </header>

    <section class="mb-10 relative z-10">
      <h2 class="text-3xl font-black text-navy dark:text-white mb-3 transition-colors duration-300">LFA Framework
        Summary</h2>
      <p class="text-slate-600 dark:text-slate-400 max-w-3xl text-lg transition-colors duration-300 leading-relaxed">
        Strategic framework overview outlining problem definition, intervention logic, and success metrics for your
        program.
      </p>
    </section>

    <section class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12 relative z-10">
      <div
        class="border-2 border-slate-200 dark:border-slate-800 rounded-2xl p-7 hover:shadow-lg dark:hover:shadow-xl transition-all bg-white dark:bg-slate-950 flex flex-col h-full group">
        <div class="flex justify-between items-start mb-5">
          <div class="flex items-center gap-3">
            <span
              class="text-base font-black text-blue-600 dark:text-blue-400 font-mono transition-colors duration-300">01</span>
            <h3
              class="text-sm font-black text-slate-800 dark:text-slate-100 uppercase tracking-wide transition-colors duration-300">
              Problem Statement</h3>
          </div>
          <button
            class="text-slate-400 dark:text-slate-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg">
            <a href="Step_1.html">
              <span class="material-symbols-outlined text-[20px]">edit</span>
            </a>
          </button>
        </div>
        <p id="summary-step1"
          class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed transition-colors duration-300 font-medium">
        </p>
      </div>

      <div
        class="border-2 border-slate-200 dark:border-slate-800 rounded-2xl p-7 hover:shadow-lg dark:hover:shadow-xl transition-all bg-white dark:bg-slate-950 flex flex-col h-full group">
        <div class="flex justify-between items-start mb-5">
          <div class="flex items-center gap-3">
            <span
              class="text-base font-black text-blue-600 dark:text-blue-400 font-mono transition-colors duration-300">02</span>
            <h3
              class="text-sm font-black text-slate-800 dark:text-slate-100 uppercase tracking-wide transition-colors duration-300">
              Desired Student Change</h3>
          </div>
          <button
            class="text-slate-400 dark:text-slate-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg">
            <a href="Step_2.html">
              <span class="material-symbols-outlined text-[20px]">edit</span>
            </a>
          </button>
        </div>
        <p id="summary-step2"
          class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed transition-colors duration-300 font-medium">
        </p>
      </div>

      <div
        class="border-2 border-slate-200 dark:border-slate-800 rounded-2xl p-7 hover:shadow-lg dark:hover:shadow-xl transition-all bg-white dark:bg-slate-950 flex flex-col h-full group">
        <div class="flex justify-between items-start mb-5">
          <div class="flex items-center gap-3">
            <span
              class="text-base font-black text-blue-600 dark:text-blue-400 font-mono transition-colors duration-300">03</span>
            <h3
              class="text-sm font-black text-slate-800 dark:text-slate-100 uppercase tracking-wide transition-colors duration-300">
              Proposed Intervention</h3>
          </div>
          <button
            class="text-slate-400 dark:text-slate-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg">
            <a href="Step_3.html">
              <span class="material-symbols-outlined text-[20px]">edit</span>
            </a>
          </button>
        </div>
        <p id="summary-step3"
          class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed transition-colors duration-300 font-medium">
        </p>
      </div>

      <div
        class="border-2 border-slate-200 dark:border-slate-800 rounded-2xl p-7 hover:shadow-lg dark:hover:shadow-xl transition-all bg-white dark:bg-slate-950 flex flex-col h-full group">
        <div class="flex justify-between items-start mb-5">
          <div class="flex items-center gap-3">
            <span
              class="text-base font-black text-blue-600 dark:text-blue-400 font-mono transition-colors duration-300">04</span>
            <h3
              class="text-sm font-black text-slate-800 dark:text-slate-100 uppercase tracking-wide transition-colors duration-300">
              Primary Stakeholders</h3>
          </div>
          <button
            class="text-slate-400 dark:text-slate-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg">
            <a href="Step_4.html">
              <span class="material-symbols-outlined text-[20px]">edit</span>
            </a>
          </button>
        </div>
        <div id="summary-step4" class="flex flex-wrap gap-2"></div>
      </div>

      <div
        class="border-2 border-slate-200 dark:border-slate-800 rounded-2xl p-7 hover:shadow-lg dark:hover:shadow-xl transition-all bg-white dark:bg-slate-950 flex flex-col h-full group">
        <div class="flex justify-between items-start mb-5">
          <div class="flex items-center gap-3">
            <span
              class="text-base font-black text-blue-600 dark:text-blue-400 font-mono transition-colors duration-300">05</span>
            <h3
              class="text-sm font-black text-slate-800 dark:text-slate-100 uppercase tracking-wide transition-colors duration-300">
              Practice Changes</h3>
          </div>
          <button
            class="text-slate-400 dark:text-slate-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg">
            <a href="Step_5.html">
              <span class="material-symbols-outlined text-[20px]">edit</span>
            </a>
          </button>
        </div>
        <p id="summary-step5"
          class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed transition-colors duration-300 font-medium">
        </p>
      </div>

      <div
        class="border-2 border-slate-200 dark:border-slate-800 rounded-2xl p-7 hover:shadow-lg dark:hover:shadow-xl transition-all bg-white dark:bg-slate-950 flex flex-col h-full group">
        <div class="flex justify-between items-start mb-5">
          <div class="flex items-center gap-3">
            <span
              class="text-base font-black text-blue-600 dark:text-blue-400 font-mono transition-colors duration-300">06</span>
            <h3
              class="text-sm font-black text-slate-800 dark:text-slate-100 uppercase tracking-wide transition-colors duration-300">
              Key Performance Indicators</h3>
          </div>
          <button
            class="text-slate-400 dark:text-slate-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg">
            <a href="Step_6.html">
              <span class="material-symbols-outlined text-[20px]">edit</span>
            </a>
          </button>
        </div>
        <p id="summary-step6"
          class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed transition-colors duration-300 font-medium">
        </p>
      </div>

      <div
        class="relative border-2 border-slate-200 dark:border-slate-800 rounded-2xl p-7 bg-gradient-to-br from-slate-50 to-white dark:from-slate-900 dark:to-slate-950 flex flex-col h-full md:col-span-2 transition-all duration-300">
        <div class="flex justify-between items-start mb-5">
          <div class="flex items-center gap-3">
            <span
              class="material-symbols-outlined text-blue-600 dark:text-blue-400 transition-colors duration-300">smart_toy</span>
            <h3
              class="text-sm font-black text-slate-800 dark:text-slate-100 uppercase tracking-wide transition-colors duration-300">
              AI Generated Insights
            </h3>
          </div>
          <button id="generate-ai-btn"
            class="group relative inline-flex items-center gap-3 px-8 py-3 bg-gradient-to-r from-navy to-blue-900 dark:from-blue-600 dark:to-blue-500 text-white rounded-2xl shadow-2xl hover:shadow-blue-500/50 dark:hover:shadow-blue-500/50 transition-all duration-300 font-black text-base overflow-hidden hover:scale-105 active:scale-95">
            <span
              class="absolute inset-0 bg-gradient-to-r from-blue-600 to-purple-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
            <span class="material-symbols-outlined text-xl relative z-10 group-hover:rotate-12 transition-transform">
              auto_awesome
            </span>
            <span class="relative z-10">Generate Insights</span>
          </button>
        </div>
        <div id="summary-ai"
          class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed bg-white dark:bg-slate-950 border-2 border-slate-200 dark:border-slate-800 rounded-xl p-5 min-h-[140px] transition-colors duration-300 font-medium">
          <span class="text-slate-400 dark:text-slate-500 italic transition-colors duration-300">
            Click "Generate Insights" to produce AI-assisted analysis from your framework...
          </span>
        </div>
      </div>
    </section>

    <div
      class="pt-8 border-t-2 border-slate-200 dark:border-slate-800 no-print flex flex-col gap-6 transition-colors duration-300">
      <div class="flex flex-col md:flex-row justify-end gap-4">
        <button onclick="window.print()"
          class="group relative flex items-center justify-center gap-3 px-12 py-4 bg-gradient-to-r from-navy to-blue-900 dark:from-blue-600 dark:to-blue-500 text-white rounded-2xl shadow-2xl hover:shadow-blue-500/50 dark:hover:shadow-blue-500/50 transition-all duration-300 font-black text-lg overflow-hidden hover:scale-105 active:scale-95">
          <span
            class="absolute inset-0 bg-gradient-to-r from-blue-600 to-purple-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
          <span class="material-symbols-outlined text-2xl relative z-10">picture_as_pdf</span>
          <span class="relative z-10">Export to PDF</span>
        </button>
      </div>
      <div class="flex flex-col md:flex-row justify-between items-center gap-3">
        <p
          class="text-xs text-slate-400 dark:text-slate-500 font-bold uppercase tracking-widest transition-colors duration-300">
          Version 1.0.1</p>
        <p class="text-xs text-slate-400 dark:text-slate-500 transition-colors duration-300">© 2026 TechVerse Builders.
          All Rights Reserved.</p>
      </div>
    </div>
  </main>

  <script>
    const data = JSON.parse(sessionStorage.getItem("lfaData")) || {};

    // Text steps
    document.getElementById("summary-step1").innerText = data.step1 || "—";
    document.getElementById("summary-step2").innerText = data.step2 || "—";
    document.getElementById("summary-step3").innerText = data.step3 || "—";
    document.getElementById("summary-step5").innerText = data.step5 || "—";
    document.getElementById("summary-step6").innerText = data.step6 || "—";

    // Stakeholders (Step 4)
    const container = document.getElementById("summary-step4");
    if (data.step4 && data.step4.length) {
      data.step4.forEach(s => {
        const tag = document.createElement("span");
        tag.className =
          "inline-flex items-center px-3 py-1.5 rounded-lg text-xs font-bold bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 border-2 border-blue-200 dark:border-blue-800 shadow-sm transition-colors duration-300";
        tag.innerText = s.name;
        container.appendChild(tag);
      });
    } else {
      container.innerHTML = "<span class='text-sm text-slate-400 dark:text-slate-500 italic transition-colors duration-300'>No Stakeholders Selected</span>";
    }
  </script>

  <!-- AI Generation Script -->
  <script>
    const aiBtn = document.getElementById("generate-ai-btn");
    const aiBox = document.getElementById("summary-ai");

    aiBtn.addEventListener("click", async () => {
      aiBox.innerHTML = "Generating insights…";

      const lfaData = JSON.parse(sessionStorage.getItem("lfaData")) || {};

      try {
        const res = await fetch("https://lfa-backend-kohl.vercel.app/api/index", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ lfaData }),
        });

        const data = await res.json();
        aiBox.innerText = `
${data.step1}

${data.step2}

${data.step3}
${data.step4}
${data.step5}
${data.step6}
`;

      } catch (err) {
        aiBox.innerText = "Failed to generate insights.";
      }
    });
  </script>

</body>

</html>